Version 4
SHEET 1 2280 1888
WIRE 1520 -160 -256 -160
WIRE -192 -144 -256 -144
WIRE -240 -128 -256 -128
WIRE -336 -112 -560 -112
WIRE -240 -112 -240 -128
WIRE -240 -112 -256 -112
WIRE -240 -96 -240 -112
WIRE -240 -96 -256 -96
WIRE -288 -64 -288 -96
WIRE -272 -64 -288 -64
WIRE -240 -64 -240 -96
WIRE -240 -64 -272 -64
WIRE -816 32 -816 16
WIRE -48 32 -400 32
WIRE 272 32 -48 32
WIRE 544 32 272 32
WIRE 832 32 544 32
WIRE 1104 32 832 32
WIRE 1408 32 1104 32
WIRE 1696 32 1408 32
WIRE 1776 32 1696 32
WIRE -816 48 -816 32
WIRE -816 48 -864 48
WIRE -816 64 -816 48
WIRE -400 96 -400 32
WIRE -48 96 -48 32
WIRE 272 96 272 32
WIRE 544 96 544 32
WIRE 832 96 832 32
WIRE 1104 96 1104 32
WIRE 1408 96 1408 32
WIRE -864 112 -864 48
WIRE -816 112 -864 112
WIRE -720 144 -768 144
WIRE -560 144 -560 -112
WIRE -480 144 -560 144
WIRE -240 144 -320 144
WIRE -192 144 -192 -144
WIRE -192 144 -240 144
WIRE -128 144 -192 144
WIRE 192 144 32 144
WIRE 464 144 352 144
WIRE 752 144 624 144
WIRE 1024 144 912 144
WIRE 1328 144 1184 144
WIRE 1520 144 1520 -160
WIRE 1520 144 1488 144
WIRE 1600 144 1520 144
WIRE -480 192 -576 192
WIRE -240 192 -304 192
WIRE -208 192 -240 192
WIRE -128 192 -160 192
WIRE 192 192 160 192
WIRE 464 192 448 192
WIRE 752 192 736 192
WIRE 1024 192 992 192
WIRE 1328 192 1296 192
WIRE -816 208 -816 160
WIRE -816 224 -816 208
WIRE -816 224 -960 224
WIRE -816 256 -816 224
WIRE -720 272 -720 144
WIRE -576 272 -576 192
WIRE -576 272 -720 272
WIRE -160 272 -160 192
WIRE -160 272 -576 272
WIRE 112 272 -160 272
WIRE 160 272 160 192
WIRE 160 272 112 272
WIRE 448 272 448 192
WIRE 448 272 160 272
WIRE 736 272 736 192
WIRE 736 272 448 272
WIRE 992 272 992 192
WIRE 992 272 736 272
WIRE 1296 272 1296 192
WIRE 1296 272 992 272
WIRE -576 288 -576 272
WIRE -816 304 -864 304
WIRE -480 304 -480 240
WIRE -400 304 -400 240
WIRE -400 304 -480 304
WIRE -128 304 -128 240
WIRE -128 304 -400 304
WIRE -48 304 -48 240
WIRE -48 304 -128 304
WIRE 192 304 192 240
WIRE 192 304 -48 304
WIRE 272 304 272 240
WIRE 272 304 192 304
WIRE 464 304 464 240
WIRE 464 304 272 304
WIRE 544 304 544 240
WIRE 544 304 464 304
WIRE 640 304 544 304
WIRE 752 304 752 240
WIRE 752 304 640 304
WIRE 832 304 832 240
WIRE 832 304 752 304
WIRE 1024 304 1024 240
WIRE 1024 304 832 304
WIRE 1104 304 1104 240
WIRE 1104 304 1024 304
WIRE 1328 304 1328 240
WIRE 1328 304 1104 304
WIRE 1408 304 1408 240
WIRE 1408 304 1328 304
WIRE -1040 336 -1040 304
WIRE -720 336 -720 272
WIRE -720 336 -768 336
WIRE -816 352 -816 336
WIRE 640 352 640 304
WIRE -864 368 -864 304
WIRE -816 368 -816 352
WIRE -816 368 -864 368
WIRE 640 368 640 352
WIRE -1040 384 -1040 336
WIRE -816 384 -816 368
WIRE 208 400 208 368
WIRE 400 400 400 368
WIRE 208 464 208 400
WIRE 400 464 400 400
WIRE -1264 528 -1280 528
WIRE -1200 528 -1264 528
WIRE -1200 544 -1280 544
WIRE -1040 544 -1040 448
WIRE -1040 544 -1136 544
WIRE -1024 544 -1040 544
WIRE 304 544 208 544
WIRE 400 544 304 544
WIRE -1248 560 -1264 560
WIRE -1200 560 -1248 560
WIRE -1200 576 -1232 576
WIRE -1280 592 -1312 592
WIRE -1232 592 -1232 576
WIRE -1232 592 -1280 592
WIRE -1200 592 -1232 592
WIRE 560 640 560 624
WIRE 560 656 560 640
WIRE 640 656 560 656
WIRE -1232 672 -1264 672
WIRE -1184 672 -1232 672
WIRE 560 672 560 656
WIRE -1184 688 -1264 688
WIRE -1040 688 -1120 688
WIRE -1024 688 -1040 688
WIRE -1008 688 -1024 688
WIRE -1232 704 -1248 704
WIRE -1184 704 -1232 704
WIRE -1184 720 -1216 720
WIRE 640 720 640 656
WIRE 640 720 560 720
WIRE -1264 736 -1296 736
WIRE -1216 736 -1216 720
WIRE -1216 736 -1264 736
WIRE -1184 736 -1216 736
WIRE -1040 752 -1040 688
WIRE 464 752 432 752
WIRE 512 752 464 752
WIRE 560 832 560 768
WIRE 128 848 48 848
WIRE 240 848 128 848
WIRE 320 848 240 848
WIRE -1040 864 -1040 816
WIRE -1040 880 -1040 864
WIRE -832 880 -912 880
WIRE -800 880 -832 880
WIRE 656 880 560 880
WIRE 320 896 320 848
WIRE 320 896 240 896
WIRE 464 912 416 912
WIRE 512 912 464 912
WIRE 192 928 160 928
WIRE 736 960 736 944
WIRE 160 976 160 928
WIRE 192 976 160 976
WIRE 240 976 240 944
WIRE 240 976 192 976
WIRE -912 1008 -912 880
WIRE -32 1008 -32 992
WIRE 240 1008 240 976
WIRE 736 1008 736 960
WIRE -128 1040 -160 1040
WIRE -32 1040 -32 1008
WIRE -32 1040 -128 1040
WIRE 48 1040 -32 1040
WIRE 64 1040 48 1040
WIRE 352 1056 240 1056
WIRE 560 1056 560 928
WIRE 720 1056 560 1056
WIRE 848 1056 816 1056
WIRE -128 1088 -128 1040
WIRE -128 1088 -160 1088
WIRE 64 1088 64 1040
WIRE 64 1088 48 1088
WIRE 192 1088 160 1088
WIRE 560 1088 560 1056
WIRE -1088 1104 -1232 1104
WIRE -928 1104 -928 1056
WIRE -928 1104 -1088 1104
WIRE -832 1104 -832 1056
WIRE -736 1104 -832 1104
WIRE -688 1104 -736 1104
WIRE -528 1104 -560 1104
WIRE -448 1104 -528 1104
WIRE -240 1120 -384 1120
WIRE -208 1120 -240 1120
WIRE 1104 1120 864 1120
WIRE -880 1136 -880 1056
WIRE -448 1136 -512 1136
WIRE 160 1136 160 1088
WIRE 192 1136 160 1136
WIRE 240 1136 240 1104
WIRE 240 1136 192 1136
WIRE 624 1136 560 1136
WIRE 768 1136 768 1056
WIRE -240 1152 -240 1120
WIRE 0 1152 0 1120
WIRE 0 1152 -240 1152
WIRE 768 1152 768 1136
WIRE 512 1168 464 1168
WIRE -512 1184 -512 1136
WIRE -160 1184 -160 1136
WIRE -160 1184 -512 1184
WIRE 864 1184 864 1120
WIRE 928 1184 864 1184
WIRE 48 1200 48 1136
WIRE 128 1200 48 1200
WIRE 1088 1200 992 1200
WIRE 1104 1200 1104 1120
WIRE 1104 1200 1088 1200
WIRE 560 1216 560 1184
WIRE 672 1216 560 1216
WIRE 704 1216 672 1216
WIRE 928 1216 704 1216
WIRE 48 1232 48 1200
WIRE 128 1232 128 1200
WIRE 240 1232 240 1136
WIRE -880 1264 -880 1232
WIRE 560 1264 560 1216
WIRE -32 1280 -48 1280
WIRE 48 1280 -32 1280
WIRE 336 1280 240 1280
WIRE 352 1280 336 1280
WIRE 128 1312 128 1232
WIRE 128 1312 96 1312
WIRE 192 1312 128 1312
WIRE 608 1312 560 1312
WIRE 512 1344 464 1344
WIRE 832 1344 832 1328
WIRE 48 1376 48 1328
WIRE 112 1376 48 1376
WIRE 128 1376 112 1376
WIRE 240 1376 240 1328
WIRE -160 1392 -160 1184
WIRE 48 1392 48 1376
WIRE -928 1424 -928 1104
WIRE -880 1424 -880 1264
WIRE -832 1424 -832 1104
WIRE 272 1424 240 1424
WIRE 48 1440 16 1440
WIRE 560 1440 560 1360
WIRE 784 1440 560 1440
WIRE 832 1440 832 1344
WIRE 944 1440 880 1440
WIRE 960 1440 944 1440
WIRE 128 1456 128 1376
WIRE 192 1456 128 1456
WIRE 128 1472 128 1456
WIRE 128 1472 96 1472
WIRE 240 1488 240 1472
WIRE 272 1488 272 1424
WIRE 272 1488 240 1488
WIRE 560 1488 560 1440
WIRE -160 1520 -160 1472
WIRE -32 1520 -160 1520
WIRE 16 1520 16 1440
WIRE 16 1520 -32 1520
WIRE 48 1520 48 1488
WIRE 48 1520 16 1520
WIRE 240 1520 240 1488
WIRE 240 1520 48 1520
WIRE -848 1536 -848 1472
WIRE 672 1536 560 1536
WIRE 864 1536 864 1488
WIRE -32 1552 -32 1520
WIRE 864 1552 864 1536
WIRE -32 1568 -32 1552
WIRE 464 1568 448 1568
WIRE 512 1568 464 1568
WIRE 560 1632 560 1584
WIRE 576 1680 560 1680
WIRE 464 1712 448 1712
WIRE 512 1712 464 1712
WIRE 576 1728 576 1680
WIRE 576 1728 560 1728
WIRE 576 1776 576 1728
WIRE 576 1792 576 1776
FLAG -576 368 0
FLAG -272 -64 VSS
FLAG 640 352 VSS
FLAG -240 144 PRBS_OUT
FLAG -240 192 ~PRBS_OUT
FLAG 304 544 0
FLAG 208 400 VDD
FLAG 400 400 VSS
FLAG 704 1280 0
FLAG 560 640 VDD
FLAG 672 1216 Vp
FLAG 1088 1200 Vpc
FLAG 624 1136 VDD
FLAG 608 1312 VSS
FLAG 944 1440 Vpc
FLAG 736 960 CHARGE
FLAG 864 1536 ~DISCHARGE
FLAG 848 1056 Vpc
FLAG 1696 32 VSS
FLAG 112 272 VCLK
FLAG 128 848 VDD
FLAG 192 976 Vbp1
FLAG 464 752 Vbp1
FLAG 464 1712 Vbn1
FLAG 768 1136 VDD
FLAG 832 1344 VSS
FLAG 576 1776 VSS
FLAG 336 1280 VSS
FLAG 352 1056 VDD
FLAG 192 1136 Vbp2
FLAG 464 912 Vbp2
FLAG 656 880 VDD
FLAG 464 1568 Vbn2
FLAG 672 1536 VSS
FLAG -1296 1856 0
FLAG -1152 1792 0
FLAG -688 1168 0
FLAG -1232 1184 0
FLAG -880 1264 VDD
FLAG -880 1136 VSS
FLAG -1088 1104 Vin
FLAG -736 1104 V_SnH
FLAG -32 1008 VDD
FLAG -32 1552 VSS
FLAG 112 1376 Vbn1
FLAG -32 1280 VSS
FLAG 128 1232 Vbn2
FLAG -816 208 ~VCLK
FLAG -816 32 VDD
FLAG -816 384 VSS
FLAG -528 1104 V_SnH
FLAG -848 1536 VCLK
FLAG -832 880 ~VCLK
FLAG -1280 544 PRBS_OUT
FLAG -1040 544 CHARGE
FLAG -1248 560 VDD
FLAG -1280 592 VDD
FLAG -1264 688 ~PRBS_OUT
FLAG -1024 688 DISCHARGE
FLAG -1232 704 VDD
FLAG -1264 736 VDD
FLAG -1264 528 VCLK
FLAG -1232 672 VCLK
FLAG -1040 336 ~CHARGE
FLAG -1040 864 ~DISCHARGE
FLAG 464 1168 ~CHARGE
FLAG 464 1344 DISCHARGE
SYMBOL Digital\\dflop -400 96 R0
SYMATTR InstName A1
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -48 96 R0
SYMATTR InstName A2
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 272 96 R0
SYMATTR InstName A3
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 544 96 R0
SYMATTR InstName A4
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 832 96 R0
SYMATTR InstName A5
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 1104 96 R0
SYMATTR InstName A6
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 1408 96 R0
SYMATTR InstName A7
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\xor -304 -192 M0
SYMATTR InstName A8
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL voltage -576 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE({VSS} {VDD} {Tp} 50p 50p {Tp} {T})
SYMBOL voltage 208 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {VDD}
SYMBOL voltage 400 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {VSS}
SYMBOL pmos4 512 1088 R0
SYMATTR InstName M1
SYMATTR Value CMOSP
SYMATTR Value2 l=0.5u w=6u
SYMBOL nmos4 512 1264 R0
SYMATTR InstName M2
SYMATTR Value CMOSN
SYMATTR Value2 l=.5u w=6u
SYMBOL cap 688 1216 R0
SYMATTR InstName C1
SYMATTR Value 5p
SYMBOL Opamps\\opamp 960 1136 R0
SYMATTR InstName U1
SYMATTR SpiceLine2 GBW=1000Meg
SYMBOL nmos4 192 1376 R0
SYMATTR InstName M6
SYMATTR Value CMOSN
SYMATTR Value2 l={Ln1} w={Wn1}
SYMBOL pmos4 192 848 R0
SYMATTR InstName M7
SYMATTR Value CMOSP
SYMATTR Value2 l={Lp1} w={Wp1}
SYMBOL nmos4 512 1632 R0
SYMATTR InstName M4
SYMATTR Value CMOSN
SYMATTR Value2 l={Ln1} w={Wn1}
SYMBOL pmos4 816 1008 R90
SYMATTR InstName M8
SYMATTR Value CMOSP
SYMATTR Value2 l=.5u w=6u
SYMBOL nmos4 784 1488 R270
SYMATTR InstName M9
SYMATTR Value CMOSN
SYMATTR Value2 l=.5u w=6u
SYMBOL pmos4 512 672 R0
SYMATTR InstName M3
SYMATTR Value CMOSP
SYMATTR Value2 l={Lp1} w={Wp1}
SYMBOL nmos4 192 1232 R0
SYMATTR InstName M11
SYMATTR Value CMOSN
SYMATTR Value2 l={Ln2} w={Wn2}
SYMBOL pmos4 192 1008 R0
SYMATTR InstName M12
SYMATTR Value CMOSP
SYMATTR Value2 l={Lp2} w={Wp2}
SYMBOL pmos4 512 832 R0
SYMATTR InstName M13
SYMATTR Value CMOSP
SYMATTR Value2 l={Lp2} w={Wp2}
SYMBOL nmos4 512 1488 R0
SYMATTR InstName M14
SYMATTR Value CMOSN
SYMATTR Value2 l={Ln2} w={Wn2}
SYMBOL voltage -1232 1088 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0.9 0.3 25mega 0)
SYMBOL voltage -1152 1696 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE({VDD} {VSS} 0 1n 1n {Tp} {T})
SYMBOL voltage -1296 1760 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE({VSS} {VDD} 0 1n 1n {Tp} {T})
SYMBOL cap -704 1104 R0
SYMATTR InstName C2
SYMATTR Value 1p
SYMBOL nmos4 -832 1008 R90
SYMATTR InstName M15
SYMATTR Value CMOSN
SYMATTR Value2 l=1u w=3u m=10
SYMBOL pmos4 -928 1472 R270
SYMATTR InstName M16
SYMATTR Value CMOSP
SYMATTR Value2 l=1u w=3u m=10
SYMBOL pmos4 -208 1040 R0
SYMATTR InstName M17
SYMATTR Value CMOSP
SYMATTR Value2 l=1u w=4u
SYMBOL res -176 1376 R0
SYMATTR InstName R1
SYMATTR Value 10K
SYMBOL pmos4 0 1040 R0
SYMATTR InstName M18
SYMATTR Value CMOSP
SYMATTR Value2 l=1u w=4u
SYMBOL nmos4 96 1392 M0
SYMATTR InstName M19
SYMATTR Value CMOSN
SYMATTR Value2 l={Ln1} w={Wn1}
SYMBOL Opamps\\opamp -416 1056 R0
SYMATTR InstName U2
SYMATTR SpiceLine2 GBW=500Meg
SYMBOL nmos4 96 1232 M0
SYMATTR InstName M20
SYMATTR Value CMOSN
SYMATTR Value2 l={Ln2} w={Wn2}
SYMBOL nmos4 -768 256 M0
SYMATTR InstName M5
SYMATTR Value CMOSN
SYMATTR Value2 l=1u w=10u m=4
SYMBOL pmos4 -768 64 M0
SYMATTR InstName M10
SYMATTR Value CMOSP
SYMATTR Value2 l=1u w=25u m=4
SYMBOL Digital\\and -1168 496 R0
SYMATTR InstName A9
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMBOL Digital\\and -1152 640 R0
SYMATTR InstName A10
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMBOL Digital\\inv -1104 448 R270
SYMATTR InstName A11
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\inv -976 752 R90
SYMATTR InstName A12
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = td_DFF
TEXT 864 408 Left 2 !.params VDD = 1.8V VSS = 0V td_DFF = 1p T = 10n Tp = 5n tff_rise = 50p
TEXT 824 600 Left 2 !.ic V(Vp) = 0.9 V(Vpc) = 0.9
TEXT 728 456 Left 2 !.include tsmc018.txt
TEXT 1264 528 Left 2 !.tran 50n
TEXT 1000 456 Left 2 !.LIB opamp.sub
TEXT -296 1872 Left 2 !.param Wn1=60u Ln1=0.25u Wn2=60u Ln2=.25u Wp1=360u Lp1=0.25u Wp2=360u Lp2=0.25u
