Version 4
SHEET 1 2132 1448
WIRE 1744 -1072 -1312 -1072
WIRE 1088 -1056 -1312 -1056
WIRE -1296 -1040 -1312 -1040
WIRE -1392 -1024 -1616 -1024
WIRE -1296 -1024 -1296 -1040
WIRE -1296 -1024 -1312 -1024
WIRE -1296 -1008 -1296 -1024
WIRE -1296 -1008 -1312 -1008
WIRE -1344 -976 -1344 -1008
WIRE -1328 -976 -1344 -976
WIRE -1296 -976 -1296 -1008
WIRE -1296 -976 -1328 -976
WIRE -1904 -912 -1904 -976
WIRE -1760 -912 -1760 -976
WIRE -1104 -880 -1456 -880
WIRE -784 -880 -1104 -880
WIRE -512 -880 -784 -880
WIRE -224 -880 -512 -880
WIRE 48 -880 -224 -880
WIRE 352 -880 48 -880
WIRE 560 -880 352 -880
WIRE 592 -880 560 -880
WIRE 944 -880 592 -880
WIRE 1264 -880 944 -880
WIRE 1536 -880 1264 -880
WIRE -1456 -816 -1456 -880
WIRE -1104 -816 -1104 -880
WIRE -784 -816 -784 -880
WIRE -512 -816 -512 -880
WIRE -224 -816 -224 -880
WIRE 48 -816 48 -880
WIRE 352 -816 352 -880
WIRE 592 -816 592 -880
WIRE 944 -816 944 -880
WIRE 1264 -816 1264 -880
WIRE 1536 -816 1536 -880
WIRE -1616 -768 -1616 -1024
WIRE -1536 -768 -1616 -768
WIRE -1296 -768 -1376 -768
WIRE -1184 -768 -1296 -768
WIRE -864 -768 -1024 -768
WIRE -592 -768 -704 -768
WIRE -304 -768 -432 -768
WIRE -32 -768 -144 -768
WIRE 272 -768 128 -768
WIRE 512 -768 432 -768
WIRE 864 -768 672 -768
WIRE 1088 -768 1088 -1056
WIRE 1088 -768 1024 -768
WIRE 1184 -768 1088 -768
WIRE 1456 -768 1344 -768
WIRE 1744 -768 1744 -1072
WIRE 1744 -768 1616 -768
WIRE -1536 -720 -1632 -720
WIRE -1296 -720 -1360 -720
WIRE -1264 -720 -1296 -720
WIRE -1184 -720 -1216 -720
WIRE -864 -720 -896 -720
WIRE -592 -720 -608 -720
WIRE -304 -720 -320 -720
WIRE -32 -720 -64 -720
WIRE 272 -720 240 -720
WIRE 512 -720 480 -720
WIRE 864 -720 832 -720
WIRE 1184 -720 1152 -720
WIRE 1456 -720 1440 -720
WIRE -1632 -640 -1632 -720
WIRE -1632 -640 -1712 -640
WIRE -1216 -640 -1216 -720
WIRE -1216 -640 -1632 -640
WIRE -944 -640 -1216 -640
WIRE -896 -640 -896 -720
WIRE -896 -640 -944 -640
WIRE -608 -640 -608 -720
WIRE -608 -640 -896 -640
WIRE -320 -640 -320 -720
WIRE -320 -640 -608 -640
WIRE -64 -640 -64 -720
WIRE -64 -640 -320 -640
WIRE 240 -640 240 -720
WIRE 240 -640 -64 -640
WIRE 480 -640 480 -720
WIRE 480 -640 240 -640
WIRE 832 -640 832 -720
WIRE 832 -640 480 -640
WIRE 1152 -640 1152 -720
WIRE 1152 -640 832 -640
WIRE 1440 -640 1440 -720
WIRE 1440 -640 1152 -640
WIRE -1632 -624 -1632 -640
WIRE -1536 -608 -1536 -672
WIRE -1456 -608 -1456 -672
WIRE -1456 -608 -1536 -608
WIRE -1184 -608 -1184 -672
WIRE -1184 -608 -1456 -608
WIRE -1104 -608 -1104 -672
WIRE -1104 -608 -1184 -608
WIRE -864 -608 -864 -672
WIRE -864 -608 -1104 -608
WIRE -784 -608 -784 -672
WIRE -784 -608 -864 -608
WIRE -592 -608 -592 -672
WIRE -592 -608 -784 -608
WIRE -512 -608 -512 -672
WIRE -512 -608 -592 -608
WIRE -416 -608 -512 -608
WIRE -304 -608 -304 -672
WIRE -304 -608 -416 -608
WIRE -224 -608 -224 -672
WIRE -224 -608 -304 -608
WIRE -32 -608 -32 -672
WIRE -32 -608 -224 -608
WIRE 48 -608 48 -672
WIRE 48 -608 -32 -608
WIRE 272 -608 272 -672
WIRE 272 -608 48 -608
WIRE 352 -608 352 -672
WIRE 352 -608 272 -608
WIRE 512 -608 512 -672
WIRE 512 -608 352 -608
WIRE 592 -608 592 -672
WIRE 592 -608 512 -608
WIRE 864 -608 864 -672
WIRE 864 -608 592 -608
WIRE 944 -608 944 -672
WIRE 944 -608 864 -608
WIRE 1184 -608 1184 -672
WIRE 1184 -608 944 -608
WIRE 1264 -608 1264 -672
WIRE 1264 -608 1184 -608
WIRE 1456 -608 1456 -672
WIRE 1456 -608 1264 -608
WIRE 1536 -608 1536 -672
WIRE 1536 -608 1456 -608
WIRE -416 -560 -416 -608
WIRE -416 -544 -416 -560
WIRE -1712 -480 -1712 -640
WIRE -1712 -368 -1712 -416
WIRE -1712 -352 -1712 -368
WIRE 352 -272 352 -336
WIRE -688 -240 -800 -240
WIRE -368 -240 -688 -240
WIRE 496 -224 496 -272
WIRE -368 -208 -416 -208
WIRE 304 -208 240 -208
WIRE -96 -192 -192 -192
WIRE 80 -192 -96 -192
WIRE 352 -176 352 -192
WIRE 480 -176 352 -176
WIRE 672 -176 560 -176
WIRE -368 -144 -432 -144
WIRE 352 -144 352 -176
WIRE 672 -128 672 -176
WIRE 816 -128 672 -128
WIRE 1392 -128 1312 -128
WIRE -1312 -112 -1328 -112
WIRE -1248 -112 -1312 -112
WIRE -1248 -96 -1328 -96
WIRE -1088 -96 -1184 -96
WIRE -1072 -96 -1088 -96
WIRE 1568 -96 1568 -144
WIRE 1600 -96 1568 -96
WIRE -1296 -80 -1312 -80
WIRE -1248 -80 -1296 -80
WIRE 304 -80 256 -80
WIRE 1568 -80 1568 -96
WIRE 1600 -80 1568 -80
WIRE 1744 -80 1744 -112
WIRE 1744 -80 1664 -80
WIRE 1824 -80 1744 -80
WIRE 1936 -80 1888 -80
WIRE 1952 -80 1936 -80
WIRE -1248 -64 -1280 -64
WIRE -1072 -64 -1184 -64
WIRE -800 -64 -800 -160
WIRE 1568 -64 1568 -80
WIRE 1600 -64 1568 -64
WIRE -1328 -48 -1360 -48
WIRE -1280 -48 -1280 -64
WIRE -1280 -48 -1328 -48
WIRE -1248 -48 -1280 -48
WIRE 816 -48 816 -128
WIRE 816 -48 800 -48
WIRE 1392 -48 1392 -128
WIRE 1472 -48 1392 -48
WIRE 1600 -48 1472 -48
WIRE 352 -32 352 -64
WIRE 528 -32 352 -32
WIRE 608 -32 528 -32
WIRE 672 -32 608 -32
WIRE 1600 -32 1392 -32
WIRE 352 0 352 -32
WIRE 944 0 944 -64
WIRE -1280 32 -1312 32
WIRE -1232 32 -1280 32
WIRE -1232 48 -1312 48
WIRE -1072 48 -1168 48
WIRE -1056 48 -1072 48
WIRE 672 48 672 -32
WIRE 928 48 672 48
WIRE -1280 64 -1296 64
WIRE -1232 64 -1280 64
WIRE 304 64 256 64
WIRE -1232 80 -1264 80
WIRE -1024 80 -1168 80
WIRE -1312 96 -1344 96
WIRE -1264 96 -1264 80
WIRE -1264 96 -1312 96
WIRE -1232 96 -1264 96
WIRE 1392 96 1392 48
WIRE -800 128 -800 16
WIRE 352 144 352 80
WIRE 496 144 352 144
WIRE 800 144 800 -48
WIRE 800 144 576 144
WIRE -800 160 -800 128
WIRE 304 208 240 208
WIRE 352 256 352 224
WIRE 560 256 560 192
WIRE -800 288 -800 240
WIRE 1360 304 1360 272
WIRE 1440 304 1360 304
WIRE 1552 304 1504 304
WIRE 1568 304 1552 304
WIRE 1360 368 1360 304
WIRE 1360 496 1360 448
WIRE -1168 640 -1184 640
WIRE -1104 640 -1168 640
WIRE -1104 656 -1184 656
WIRE -944 656 -1040 656
WIRE -928 656 -944 656
WIRE -1152 672 -1168 672
WIRE -1104 672 -1152 672
WIRE -1104 688 -1136 688
WIRE -928 688 -1040 688
WIRE -1184 704 -1216 704
WIRE -1136 704 -1136 688
WIRE -1136 704 -1184 704
WIRE -1104 704 -1136 704
WIRE 352 704 352 640
WIRE 496 752 496 704
WIRE 304 768 240 768
WIRE -1136 784 -1168 784
WIRE -1088 784 -1136 784
WIRE -1088 800 -1168 800
WIRE -928 800 -1024 800
WIRE -912 800 -928 800
WIRE 352 800 352 784
WIRE 480 800 352 800
WIRE 672 800 560 800
WIRE -1136 816 -1152 816
WIRE -1088 816 -1136 816
WIRE -1088 832 -1120 832
WIRE -880 832 -1024 832
WIRE 352 832 352 800
WIRE -1168 848 -1200 848
WIRE -1120 848 -1120 832
WIRE -1120 848 -1168 848
WIRE -1088 848 -1120 848
WIRE 672 848 672 800
WIRE 816 848 672 848
WIRE 304 896 256 896
WIRE 816 928 816 848
WIRE 816 928 800 928
WIRE 352 944 352 912
WIRE 528 944 352 944
WIRE 608 944 528 944
WIRE 672 944 608 944
WIRE 352 976 352 944
WIRE 944 976 944 912
WIRE 672 1024 672 944
WIRE 928 1024 672 1024
WIRE 304 1040 256 1040
WIRE 352 1120 352 1056
WIRE 496 1120 352 1120
WIRE 800 1120 800 928
WIRE 800 1120 576 1120
WIRE 304 1184 240 1184
WIRE 352 1232 352 1200
WIRE 560 1232 560 1168
FLAG -800 288 0
FLAG -800 128 VDC
FLAG -688 -240 Vin
FLAG -416 -208 0
FLAG -432 -144 VCLK
FLAG -96 -192 V_snh
FLAG 352 256 0
FLAG 352 -336 VDD
FLAG 528 32 0
FLAG 304 160 0
FLAG 304 -256 0
FLAG 608 -32 Vp1
FLAG 816 -128 VDC
FLAG 240 -208 V_snh
FLAG 240 208 V_snh
FLAG 304 -128 0
FLAG 304 16 0
FLAG 512 192 0
FLAG 544 -224 0
FLAG 992 0 0
FLAG -1328 -96 PRBS_OUT
FLAG -1088 -96 CHARGE1
FLAG -1296 -80 ~RESET1
FLAG -1328 -48 VDD
FLAG -1312 48 ~PRBS_OUT
FLAG -1072 48 DISCHARGE1
FLAG -1280 64 ~RESET1
FLAG -1312 96 VDD
FLAG -1312 -112 ~VCLK
FLAG -1280 32 ~VCLK
FLAG 256 -80 CHARGE1
FLAG 496 -272 ~CHARGE1
FLAG 256 64 DISCHARGE1
FLAG 560 256 ~DISCHARGE1
FLAG 944 -64 RESET1
FLAG -1072 -64 ~CHARGE1
FLAG -1024 80 ~DISCHARGE1
FLAG 1392 96 0
FLAG 1744 -112 RESET1
FLAG 1008 48 VDC
FLAG 1936 -80 ~RESET1
FLAG 352 1232 0
FLAG 352 640 VDD
FLAG 528 1008 0
FLAG 304 1136 0
FLAG 304 720 0
FLAG 608 944 Vp2
FLAG 816 848 VDC
FLAG 240 768 V_snh
FLAG 240 1184 V_snh
FLAG 304 848 0
FLAG 304 992 0
FLAG 512 1168 0
FLAG 544 752 0
FLAG 992 976 0
FLAG 256 896 CHARGE2
FLAG 496 704 ~CHARGE2
FLAG 256 1040 DISCHARGE2
FLAG 560 1232 ~DISCHARGE2
FLAG 944 912 RESET2
FLAG 1008 1024 VDC
FLAG 1360 496 0
FLAG 1360 272 RESET2
FLAG 1552 304 ~RESET2
FLAG -1184 656 PRBS_OUT
FLAG -944 656 CHARGE2
FLAG -1152 672 ~RESET2
FLAG -1184 704 VDD
FLAG -1168 800 ~PRBS_OUT
FLAG -928 800 DISCHARGE2
FLAG -1136 816 ~RESET2
FLAG -1168 848 VDD
FLAG -1168 640 ~VCLK
FLAG -1136 784 ~VCLK
FLAG -928 688 ~CHARGE2
FLAG -880 832 ~DISCHARGE2
FLAG 1568 -144 VSS
FLAG 1312 -48 0
FLAG 1472 -48 INIT
FLAG -1904 -832 0
FLAG -1904 -976 VDD
FLAG -1632 -544 0
FLAG -1328 -976 VSS
FLAG -416 -560 VSS
FLAG -1296 -768 PRBS_OUT
FLAG -1296 -720 ~PRBS_OUT
FLAG 560 -880 VSS
FLAG -944 -640 VCLK
FLAG -1712 -368 ~VCLK
FLAG -1760 -832 0
FLAG -1760 -976 VSS
SYMBOL voltage -800 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0.9
SYMBOL voltage -800 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 {vamp1} {X1/T})
SYMBOL SpecialFunctions\\sample -288 -208 R0
SYMATTR InstName A1
SYMBOL g 352 -176 M180
SYMATTR InstName G1
SYMATTR Value {G}
SYMBOL g 352 240 M180
SYMATTR InstName G2
SYMATTR Value {G}
SYMBOL sw 352 -160 R0
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL sw 352 -16 R0
SYMATTR InstName S2
SYMATTR Value MYSW
SYMBOL sw 480 144 R270
SYMATTR InstName S3
SYMATTR Value MYSW
SYMBOL sw 576 -176 R90
SYMATTR InstName S4
SYMATTR Value MYSW
SYMBOL cap 512 -32 R0
SYMATTR InstName C1
SYMATTR Value 5p
SYMBOL sw 1024 48 R90
SYMATTR InstName S5
SYMATTR Value MYSW
SYMBOL Digital\\and -1216 -144 R0
SYMATTR InstName A2
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL Digital\\and -1200 0 R0
SYMATTR InstName A3
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL voltage 1392 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE({VSS} {VDD} {4*T+Tp} 500p 500p {3*T+Tp} {8*T})
SYMBOL Digital\\inv 1824 -144 R0
SYMATTR InstName A4
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL g 352 800 M180
SYMATTR InstName G3
SYMATTR Value {G}
SYMBOL g 352 1216 M180
SYMATTR InstName G4
SYMATTR Value {G}
SYMBOL sw 352 816 R0
SYMATTR InstName S6
SYMATTR Value MYSW
SYMBOL sw 352 960 R0
SYMATTR InstName S7
SYMATTR Value MYSW
SYMBOL sw 480 1120 R270
SYMATTR InstName S8
SYMATTR Value MYSW
SYMBOL sw 576 800 R90
SYMATTR InstName S9
SYMATTR Value MYSW
SYMBOL cap 512 944 R0
SYMATTR InstName C2
SYMATTR Value 5p
SYMBOL sw 1024 1024 R90
SYMATTR InstName S10
SYMATTR Value MYSW
SYMBOL voltage 1360 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE({VDD} {VSS} {4*T} 500p 500p {4*T+Tp1} {8*T})
SYMBOL Digital\\inv 1440 240 R0
SYMATTR InstName A5
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL Digital\\and -1072 608 R0
SYMATTR InstName A6
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL Digital\\and -1056 752 R0
SYMATTR InstName A7
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL Digital\\or 1632 -128 R0
SYMATTR InstName A8
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL voltage 1312 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE({VSS} {VDD} 0 500p 500p {Tp} {1000*T})
SYMBOL voltage -1904 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 1.8
SYMBOL Digital\\dflop -1456 -816 R0
SYMATTR InstName A9
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -1104 -816 R0
SYMATTR InstName A10
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -784 -816 R0
SYMATTR InstName A11
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -512 -816 R0
SYMATTR InstName A12
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -224 -816 R0
SYMATTR InstName A13
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 48 -816 R0
SYMATTR InstName A14
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 352 -816 R0
SYMATTR InstName A15
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\xor -1360 -1104 M0
SYMATTR InstName A16
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL voltage -1632 -640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE({VDD} {VSS} {Tp} 500p 500p {Tp} {T})
SYMBOL Digital\\inv -1648 -480 R90
SYMATTR InstName A17
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL voltage -1760 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 0
SYMBOL Digital\\dflop 592 -816 R0
SYMATTR InstName A18
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 944 -816 R0
SYMATTR InstName A19
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 1264 -816 R0
SYMATTR InstName A20
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 1536 -816 R0
SYMATTR InstName A21
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL voltage -800 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value SINE(0 {vamp2} {X2/T})
TEXT -280 -496 Left 2 !.LIB opamp.sub
TEXT 280 480 Left 2 !.model MYSW SW(Ron=1 Roff=100Meg Vt=.9 Vh=0)
TEXT -1488 384 Left 2 !.options gmin = 1e-10\n.options abstol = 1e-10\n.options reltol = 0.003
TEXT 24 -504 Left 2 !.param G = 0.0001
TEXT -1472 504 Left 2 !.tran {200*T} uic
TEXT -280 -432 Left 2 !.include tsmc018.txt
TEXT -256 -576 Left 2 !.param td_DFF = 50p tff_rise = 50p
TEXT -1608 -496 Left 2 !.param VDD=1.8V VSS=0V T=40n Tp=20n Tp1=20n
TEXT -272 -368 Left 2 !.ic V(Q0) = 0 V(Q1) = 0 V(D0) = 0 V(D1) = 0
TEXT 1664 -800 Left 2 ;11
TEXT 1048 -800 Left 2 ;9
TEXT -416 0 Left 2 !.param vamp1 = 0.2
TEXT -408 48 Left 2 !.param X1 = 0.21
TEXT -408 112 Left 2 !.param vamp2 = 0.2
TEXT -392 160 Left 2 !.param X2 = 0.37
