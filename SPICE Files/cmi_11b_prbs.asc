Version 4
SHEET 1 1940 1384
WIRE 1552 -1136 -1504 -1136
WIRE 896 -1120 -1504 -1120
WIRE -1488 -1104 -1504 -1104
WIRE -1584 -1088 -1808 -1088
WIRE -1488 -1088 -1488 -1104
WIRE -1488 -1088 -1504 -1088
WIRE -1488 -1072 -1488 -1088
WIRE -1488 -1072 -1504 -1072
WIRE -1536 -1040 -1536 -1072
WIRE -1520 -1040 -1536 -1040
WIRE -1488 -1040 -1488 -1072
WIRE -1488 -1040 -1520 -1040
WIRE -2096 -976 -2096 -1040
WIRE -1952 -976 -1952 -1040
WIRE -1296 -944 -1648 -944
WIRE -976 -944 -1296 -944
WIRE -704 -944 -976 -944
WIRE -416 -944 -704 -944
WIRE -144 -944 -416 -944
WIRE 160 -944 -144 -944
WIRE 368 -944 160 -944
WIRE 400 -944 368 -944
WIRE 752 -944 400 -944
WIRE 1072 -944 752 -944
WIRE 1344 -944 1072 -944
WIRE -1648 -880 -1648 -944
WIRE -1296 -880 -1296 -944
WIRE -976 -880 -976 -944
WIRE -704 -880 -704 -944
WIRE -416 -880 -416 -944
WIRE -144 -880 -144 -944
WIRE 160 -880 160 -944
WIRE 400 -880 400 -944
WIRE 752 -880 752 -944
WIRE 1072 -880 1072 -944
WIRE 1344 -880 1344 -944
WIRE -1808 -832 -1808 -1088
WIRE -1728 -832 -1808 -832
WIRE -1488 -832 -1568 -832
WIRE -1376 -832 -1488 -832
WIRE -1056 -832 -1216 -832
WIRE -784 -832 -896 -832
WIRE -496 -832 -624 -832
WIRE -224 -832 -336 -832
WIRE 80 -832 -64 -832
WIRE 320 -832 240 -832
WIRE 672 -832 480 -832
WIRE 896 -832 896 -1120
WIRE 896 -832 832 -832
WIRE 992 -832 896 -832
WIRE 1264 -832 1152 -832
WIRE 1552 -832 1552 -1136
WIRE 1552 -832 1424 -832
WIRE -1728 -784 -1824 -784
WIRE -1488 -784 -1552 -784
WIRE -1456 -784 -1488 -784
WIRE -1376 -784 -1408 -784
WIRE -1056 -784 -1088 -784
WIRE -784 -784 -800 -784
WIRE -496 -784 -512 -784
WIRE -224 -784 -256 -784
WIRE 80 -784 48 -784
WIRE 320 -784 288 -784
WIRE 672 -784 640 -784
WIRE 992 -784 960 -784
WIRE 1264 -784 1248 -784
WIRE -1824 -704 -1824 -784
WIRE -1824 -704 -1904 -704
WIRE -1408 -704 -1408 -784
WIRE -1408 -704 -1824 -704
WIRE -1136 -704 -1408 -704
WIRE -1088 -704 -1088 -784
WIRE -1088 -704 -1136 -704
WIRE -800 -704 -800 -784
WIRE -800 -704 -1088 -704
WIRE -512 -704 -512 -784
WIRE -512 -704 -800 -704
WIRE -256 -704 -256 -784
WIRE -256 -704 -512 -704
WIRE 48 -704 48 -784
WIRE 48 -704 -256 -704
WIRE 288 -704 288 -784
WIRE 288 -704 48 -704
WIRE 640 -704 640 -784
WIRE 640 -704 288 -704
WIRE 960 -704 960 -784
WIRE 960 -704 640 -704
WIRE 1248 -704 1248 -784
WIRE 1248 -704 960 -704
WIRE -1824 -688 -1824 -704
WIRE -1728 -672 -1728 -736
WIRE -1648 -672 -1648 -736
WIRE -1648 -672 -1728 -672
WIRE -1376 -672 -1376 -736
WIRE -1376 -672 -1648 -672
WIRE -1296 -672 -1296 -736
WIRE -1296 -672 -1376 -672
WIRE -1056 -672 -1056 -736
WIRE -1056 -672 -1296 -672
WIRE -976 -672 -976 -736
WIRE -976 -672 -1056 -672
WIRE -784 -672 -784 -736
WIRE -784 -672 -976 -672
WIRE -704 -672 -704 -736
WIRE -704 -672 -784 -672
WIRE -608 -672 -704 -672
WIRE -496 -672 -496 -736
WIRE -496 -672 -608 -672
WIRE -416 -672 -416 -736
WIRE -416 -672 -496 -672
WIRE -224 -672 -224 -736
WIRE -224 -672 -416 -672
WIRE -144 -672 -144 -736
WIRE -144 -672 -224 -672
WIRE 80 -672 80 -736
WIRE 80 -672 -144 -672
WIRE 160 -672 160 -736
WIRE 160 -672 80 -672
WIRE 320 -672 320 -736
WIRE 320 -672 160 -672
WIRE 400 -672 400 -736
WIRE 400 -672 320 -672
WIRE 672 -672 672 -736
WIRE 672 -672 400 -672
WIRE 752 -672 752 -736
WIRE 752 -672 672 -672
WIRE 992 -672 992 -736
WIRE 992 -672 752 -672
WIRE 1072 -672 1072 -736
WIRE 1072 -672 992 -672
WIRE 1264 -672 1264 -736
WIRE 1264 -672 1072 -672
WIRE 1344 -672 1344 -736
WIRE 1344 -672 1264 -672
WIRE -608 -624 -608 -672
WIRE -608 -608 -608 -624
WIRE -1904 -544 -1904 -704
WIRE -1904 -432 -1904 -480
WIRE -1904 -416 -1904 -432
WIRE 160 -336 160 -400
WIRE -880 -304 -992 -304
WIRE -560 -304 -880 -304
WIRE 304 -288 304 -336
WIRE -560 -272 -608 -272
WIRE 112 -272 48 -272
WIRE -288 -256 -384 -256
WIRE -112 -256 -288 -256
WIRE 160 -240 160 -256
WIRE 288 -240 160 -240
WIRE 480 -240 368 -240
WIRE -560 -208 -624 -208
WIRE 160 -208 160 -240
WIRE 480 -192 480 -240
WIRE 624 -192 480 -192
WIRE 1200 -192 1120 -192
WIRE -1504 -176 -1520 -176
WIRE -1440 -176 -1504 -176
WIRE -992 -176 -992 -224
WIRE -1440 -160 -1520 -160
WIRE -1280 -160 -1376 -160
WIRE -1264 -160 -1280 -160
WIRE 1376 -160 1376 -208
WIRE 1408 -160 1376 -160
WIRE -1488 -144 -1504 -144
WIRE -1440 -144 -1488 -144
WIRE -992 -144 -992 -176
WIRE 112 -144 64 -144
WIRE 1376 -144 1376 -160
WIRE 1408 -144 1376 -144
WIRE 1552 -144 1552 -176
WIRE 1552 -144 1472 -144
WIRE 1632 -144 1552 -144
WIRE 1744 -144 1696 -144
WIRE 1760 -144 1744 -144
WIRE -1440 -128 -1472 -128
WIRE -1264 -128 -1376 -128
WIRE 1376 -128 1376 -144
WIRE 1408 -128 1376 -128
WIRE -1520 -112 -1552 -112
WIRE -1472 -112 -1472 -128
WIRE -1472 -112 -1520 -112
WIRE -1440 -112 -1472 -112
WIRE 624 -112 624 -192
WIRE 624 -112 608 -112
WIRE 1200 -112 1200 -192
WIRE 1280 -112 1200 -112
WIRE 1408 -112 1280 -112
WIRE 160 -96 160 -128
WIRE 336 -96 160 -96
WIRE 416 -96 336 -96
WIRE 480 -96 416 -96
WIRE 1408 -96 1200 -96
WIRE 160 -64 160 -96
WIRE 752 -64 752 -128
WIRE -1472 -32 -1504 -32
WIRE -1424 -32 -1472 -32
WIRE -1424 -16 -1504 -16
WIRE -1264 -16 -1360 -16
WIRE -1248 -16 -1264 -16
WIRE -992 -16 -992 -64
WIRE 480 -16 480 -96
WIRE 736 -16 480 -16
WIRE -1472 0 -1488 0
WIRE -1424 0 -1472 0
WIRE 112 0 64 0
WIRE -1424 16 -1456 16
WIRE -1216 16 -1360 16
WIRE -1504 32 -1536 32
WIRE -1456 32 -1456 16
WIRE -1456 32 -1504 32
WIRE -1424 32 -1456 32
WIRE 1200 32 1200 -16
WIRE 160 80 160 16
WIRE 304 80 160 80
WIRE 608 80 608 -112
WIRE 608 80 384 80
WIRE 112 144 48 144
WIRE 160 192 160 160
WIRE 368 192 368 128
WIRE 1168 240 1168 208
WIRE 1248 240 1168 240
WIRE 1360 240 1312 240
WIRE 1376 240 1360 240
WIRE 1168 304 1168 240
WIRE 1168 432 1168 384
WIRE -1360 576 -1376 576
WIRE -1296 576 -1360 576
WIRE -1296 592 -1376 592
WIRE -1136 592 -1232 592
WIRE -1120 592 -1136 592
WIRE -1344 608 -1360 608
WIRE -1296 608 -1344 608
WIRE -1296 624 -1328 624
WIRE -1120 624 -1232 624
WIRE -1376 640 -1408 640
WIRE -1328 640 -1328 624
WIRE -1328 640 -1376 640
WIRE -1296 640 -1328 640
WIRE 160 640 160 576
WIRE 304 688 304 640
WIRE 112 704 48 704
WIRE -1328 720 -1360 720
WIRE -1280 720 -1328 720
WIRE -1280 736 -1360 736
WIRE -1120 736 -1216 736
WIRE -1104 736 -1120 736
WIRE 160 736 160 720
WIRE 288 736 160 736
WIRE 480 736 368 736
WIRE -1328 752 -1344 752
WIRE -1280 752 -1328 752
WIRE -1280 768 -1312 768
WIRE -1072 768 -1216 768
WIRE 160 768 160 736
WIRE -1360 784 -1392 784
WIRE -1312 784 -1312 768
WIRE -1312 784 -1360 784
WIRE -1280 784 -1312 784
WIRE 480 784 480 736
WIRE 624 784 480 784
WIRE 112 832 64 832
WIRE 624 864 624 784
WIRE 624 864 608 864
WIRE 160 880 160 848
WIRE 336 880 160 880
WIRE 416 880 336 880
WIRE 480 880 416 880
WIRE 160 912 160 880
WIRE 752 912 752 848
WIRE 480 960 480 880
WIRE 736 960 480 960
WIRE 112 976 64 976
WIRE 160 1056 160 992
WIRE 304 1056 160 1056
WIRE 608 1056 608 864
WIRE 608 1056 384 1056
WIRE 112 1120 48 1120
WIRE 160 1168 160 1136
WIRE 368 1168 368 1104
FLAG -992 -16 0
FLAG -992 -176 VDC
FLAG -880 -304 Vin
FLAG -608 -272 0
FLAG -624 -208 VCLK
FLAG -288 -256 V_snh
FLAG 160 192 0
FLAG 160 -400 VDD
FLAG 336 -32 0
FLAG 112 96 0
FLAG 112 -320 0
FLAG 416 -96 Vp1
FLAG 624 -192 VDC
FLAG 48 -272 V_snh
FLAG 48 144 V_snh
FLAG 112 -192 0
FLAG 112 -48 0
FLAG 320 128 0
FLAG 352 -288 0
FLAG 800 -64 0
FLAG -1520 -160 PRBS_OUT
FLAG -1280 -160 CHARGE1
FLAG -1488 -144 ~RESET1
FLAG -1520 -112 VDD
FLAG -1504 -16 ~PRBS_OUT
FLAG -1264 -16 DISCHARGE1
FLAG -1472 0 ~RESET1
FLAG -1504 32 VDD
FLAG -1504 -176 ~VCLK
FLAG -1472 -32 ~VCLK
FLAG 64 -144 CHARGE1
FLAG 304 -336 ~CHARGE1
FLAG 64 0 DISCHARGE1
FLAG 368 192 ~DISCHARGE1
FLAG 752 -128 RESET1
FLAG -1264 -128 ~CHARGE1
FLAG -1216 16 ~DISCHARGE1
FLAG 1200 32 0
FLAG 1552 -176 RESET1
FLAG 816 -16 VDC
FLAG 1744 -144 ~RESET1
FLAG 160 1168 0
FLAG 160 576 VDD
FLAG 336 944 0
FLAG 112 1072 0
FLAG 112 656 0
FLAG 416 880 Vp2
FLAG 624 784 VDC
FLAG 48 704 V_snh
FLAG 48 1120 V_snh
FLAG 112 784 0
FLAG 112 928 0
FLAG 320 1104 0
FLAG 352 688 0
FLAG 800 912 0
FLAG 64 832 CHARGE2
FLAG 304 640 ~CHARGE2
FLAG 64 976 DISCHARGE2
FLAG 368 1168 ~DISCHARGE2
FLAG 752 848 RESET2
FLAG 816 960 VDC
FLAG 1168 432 0
FLAG 1168 208 RESET2
FLAG 1360 240 ~RESET2
FLAG -1376 592 PRBS_OUT
FLAG -1136 592 CHARGE2
FLAG -1344 608 ~RESET2
FLAG -1376 640 VDD
FLAG -1360 736 ~PRBS_OUT
FLAG -1120 736 DISCHARGE2
FLAG -1328 752 ~RESET2
FLAG -1360 784 VDD
FLAG -1360 576 ~VCLK
FLAG -1328 720 ~VCLK
FLAG -1120 624 ~CHARGE2
FLAG -1072 768 ~DISCHARGE2
FLAG 1376 -208 VSS
FLAG 1120 -112 0
FLAG 1280 -112 INIT
FLAG -2096 -896 0
FLAG -2096 -1040 VDD
FLAG -1824 -608 0
FLAG -1520 -1040 VSS
FLAG -608 -624 VSS
FLAG -1488 -832 PRBS_OUT
FLAG -1488 -784 ~PRBS_OUT
FLAG 368 -944 VSS
FLAG -1136 -704 VCLK
FLAG -1904 -432 ~VCLK
FLAG -1952 -896 0
FLAG -1952 -1040 VSS
SYMBOL voltage -992 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0.9
SYMBOL voltage -992 -320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 {vamp} {X/T})
SYMBOL SpecialFunctions\\sample -480 -272 R0
SYMATTR InstName A1
SYMBOL g 160 -240 M180
SYMATTR InstName G1
SYMATTR Value {G}
SYMBOL g 160 176 M180
SYMATTR InstName G2
SYMATTR Value {G}
SYMBOL sw 160 -224 R0
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL sw 160 -80 R0
SYMATTR InstName S2
SYMATTR Value MYSW
SYMBOL sw 288 80 R270
SYMATTR InstName S3
SYMATTR Value MYSW
SYMBOL sw 384 -240 R90
SYMATTR InstName S4
SYMATTR Value MYSW
SYMBOL cap 320 -96 R0
SYMATTR InstName C1
SYMATTR Value 5p
SYMBOL sw 832 -16 R90
SYMATTR InstName S5
SYMATTR Value MYSW
SYMBOL Digital\\and -1408 -208 R0
SYMATTR InstName A11
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL Digital\\and -1392 -64 R0
SYMATTR InstName A12
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL voltage 1200 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE({VSS} {VDD} {4*T+Tp} 500p 500p {3*T+Tp} {8*T})
SYMBOL Digital\\inv 1632 -208 R0
SYMATTR InstName A13
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL g 160 736 M180
SYMATTR InstName G3
SYMATTR Value {G}
SYMBOL g 160 1152 M180
SYMATTR InstName G4
SYMATTR Value {G}
SYMBOL sw 160 752 R0
SYMATTR InstName S6
SYMATTR Value MYSW
SYMBOL sw 160 896 R0
SYMATTR InstName S7
SYMATTR Value MYSW
SYMBOL sw 288 1056 R270
SYMATTR InstName S8
SYMATTR Value MYSW
SYMBOL sw 384 736 R90
SYMATTR InstName S9
SYMATTR Value MYSW
SYMBOL cap 320 880 R0
SYMATTR InstName C2
SYMATTR Value 5p
SYMBOL sw 832 960 R90
SYMATTR InstName S10
SYMATTR Value MYSW
SYMBOL voltage 1168 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE({VDD} {VSS} {4*T} 500p 500p {4*T+Tp1} {8*T})
SYMBOL Digital\\inv 1248 176 R0
SYMATTR InstName A14
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL Digital\\and -1264 544 R0
SYMATTR InstName A15
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL Digital\\and -1248 688 R0
SYMATTR InstName A16
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL Digital\\or 1440 -192 R0
SYMATTR InstName A17
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL voltage 1120 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE({VSS} {VDD} 0 500p 500p {Tp} {1000*T})
SYMBOL voltage -2096 -992 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 1.8
SYMBOL Digital\\dflop -1648 -880 R0
SYMATTR InstName A18
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -1296 -880 R0
SYMATTR InstName A19
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -976 -880 R0
SYMATTR InstName A20
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -704 -880 R0
SYMATTR InstName A21
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -416 -880 R0
SYMATTR InstName A22
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop -144 -880 R0
SYMATTR InstName A23
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 160 -880 R0
SYMATTR InstName A24
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\xor -1552 -1168 M0
SYMATTR InstName A25
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL voltage -1824 -704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value PULSE({VDD} {VSS} {Tp} 500p 500p {Tp} {T})
SYMBOL Digital\\inv -1840 -544 R90
SYMATTR InstName A26
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMBOL voltage -1952 -992 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value 0
SYMBOL Digital\\dflop 400 -880 R0
SYMATTR InstName A27
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 752 -880 R0
SYMATTR InstName A28
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 1072 -880 R0
SYMATTR InstName A29
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
SYMBOL Digital\\dflop 1344 -880 R0
SYMATTR InstName A30
SYMATTR SpiceLine Trise = {tff_rise} Tfall = {tff_rise} Td = {td_DFF}
SYMATTR Value2 Vhigh = 1.8 Vlow = 0
TEXT -472 -560 Left 2 !.LIB opamp.sub
TEXT 88 416 Left 2 !.model MYSW SW(Ron=1 Roff=100Meg Vt=.9 Vh=0)
TEXT -1680 320 Left 2 !.options gmin = 1e-10\n.options abstol = 1e-10\n.options reltol = 0.003
TEXT -168 -568 Left 2 !.param G = 0.0001
TEXT -1664 440 Left 2 !.tran {200*T} uic
TEXT -472 -496 Left 2 !.include tsmc018.txt
TEXT -448 -640 Left 2 !.param td_DFF = 50p tff_rise = 50p
TEXT -1800 -560 Left 2 !.param VDD=1.8V VSS=0V T=40n Tp=20n Tp1=20n
TEXT -464 -432 Left 2 !.ic V(Q0) = 0 V(Q1) = 0 V(D0) = 0 V(D1) = 0
TEXT 1472 -864 Left 2 ;11
TEXT 856 -864 Left 2 ;9
TEXT -720 -72 Left 2 !.param vamp = 0.4
TEXT -712 -24 Left 2 !.param X = 0.21
